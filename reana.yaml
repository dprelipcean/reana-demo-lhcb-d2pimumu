version: 0.3.0
inputs:
  files:
    - code/Optimise.C
    - code/ModelFixing.C
    - code/OSMassFit.C
    - code/RooFitHeaders.h
    - code/lhcbStyle.C
  parameters:
    data: data/D2PiMuMuOS.root
workflow:
  type: serial
  specification:
    steps:
      - environment: 'reanahub/reana-env-root6'
        commands:
        - mkdir -p results/tmp && mkdir -p logs
        - root -b -q 'code/Optimise.C("${data}", "results")' | tee logs/optimise.log
        - root -b -q 'code/ModelFixing.C("${data}", "results/tmp/PhiModels.root")' | tee logs/model_fixing.log
        - root -b -q 'code/OSMassFit.C("${data}", "results/tmp/PhiModels.root", "results")'  | tee logs/massfit.log
outputs:
  files:
    - results/2D_Optimisation_Pi.pdf
    - results/MuMuMass_Pi.pdf
    - results/low_dimuon_signal.pdf
    - results/high_dimuon_signal.pdf
    - results/eta.pdf
    - results/rho_omega.pdf
    - results/phi.pdf
